<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipping Selection</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="StoryStyles.css">
    <style>
        .shipping-section {
            padding: 30px 0;
        }

        .form-container {
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 5px;
            background-color: #fff;
            margin-bottom: 20px;
        }

        .form-header {
            font-weight: bold;
            padding: 10px;
            background-color: #bdbdbd;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .total-cost {
            font-weight: bold;
            color: black;
        }

        .btn-continue {
            background-color: #d9534f;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .btn-continue:hover {
            background-color: #c9302c;
        }

        .form-section {
            display: flex;
            justify-content: space-between;
        }

        .form-container-half {
            width: 48%;
        }

        .text-center {
            text-align: center;
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="HomePage.html">Storytellers</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item"><a class="nav-link" href="#">Fiction</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Nonfiction</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Teens and Young Adult</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">About Us</a></li>
                </ul>
                <button class="btn btn-outline-dark" onclick="location.href='ShoppingCart.html'">
                    <img src="Assets/cart.jpg" alt="Cart" width="30" height="30">
                </button>
            </div>
        </nav>
    </header>

    <section class="shipping-section container">
        <div class="form-section">
            <div class="form-container form-container-half">
                <h3 class="form-header">Shipping Address</h3>
                <form id="shippingForm">
                    <div class="form-group">
                        <label for="address">Shipping Destination Address</label>
                        <input type="text" class="form-control" id="address" placeholder="Enter your address" required>
                        <div class="error" id="addressError"></div>
                    </div>
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" class="form-control" id="city" placeholder="Enter your city" required>
                        <div class="error" id="cityError"></div>
                    </div>
                    <div class="form-group">
                        <label for="state">State</label>
                        <input type="text" class="form-control" id="state" placeholder="Enter your state" required>
                        <div class="error" id="stateError"></div>
                    </div>
                    <div class="form-group">
                        <label for="zip">Zip Code</label>
                        <input type="text" class="form-control" id="zip" placeholder="Enter your zip code" required>
                        <div class="error" id="zipError"></div>
                    </div>
                </form>
            </div>

            <div class="form-container form-container-half">
                <h3 class="form-header">Shipping Method</h3>
                <div class="form-group">
                    <label for="carrier">Shipping Carrier</label>
                    <select class="form-control" id="carrier" required>
                        <option value="">Select Carrier</option>
                        <option value="USPS">USPS</option>
                        <option value="FedEx">FedEx</option>
                        <option value="UPS">UPS</option>
                    </select>
                    <div class="error" id="carrierError"></div>
                </div>
                <div class="form-group">
                    <label for="method">Shipping Method</label>
                    <select class="form-control" id="method" required>
                        <option value="">Select Method</option>
                        <option value="Ground">Ground (Free)</option>
                        <option value="2-Day">2-Day (+$5)</option>
                        <option value="Next Day">Next Day (+$10)</option>
                    </select>
                    <div class="error" id="methodError"></div>
                </div>
                <h4>Shipping Cost: <span id="shippingCost" class="total-cost">$0.00</span></h4>
            </div>
        </div>

        <div class="text-center">
            <button type="button" class="btn-continue" id="submitShipping">Continue to Billing</button>
        </div>
    </section>

	<footer class="text-center bg-dark text-white py-4">
		<p>&copy; 2024 Storytellers. All rights reserved.</p>
		<p>Follow us on <a href="#" class="text-light">Instagram</a> | <a href="#" class="text-light">Facebook</a> | <a href="#" class="text-light">Twitter</a></p>
	</footer>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>

    <script>
        let shippingDetailsJSON = {};

        $(document).ready(function() {
            $('#carrier, #method').change(function() {
                let carrier = $('#carrier').val();
                let method = $('#method').val();
                let shippingCost = 0;

                if (carrier === 'FedEx') {
                    if (method === '2-Day') shippingCost = 5.50;
                    if (method === 'Next Day') shippingCost = 10.50;
                } else if (carrier === 'UPS') {
                    if (method === '2-Day') shippingCost = 6.00;
                    if (method === 'Next Day') shippingCost = 11.00;
                } else if (carrier === 'USPS') {
                    if (method === '2-Day') shippingCost = 5.00;
                    if (method === 'Next Day') shippingCost = 10.00;
                }

                $('#shippingCost').text(`$${shippingCost.toFixed(2)}`);
            });

            $('#submitShipping').click(function() {
                if (validateForm()) {
                    gatherShippingData();
                    alert('Shipping details saved successfully!');
                    console.log('Shipping JSON:', JSON.stringify(shippingDetailsJSON, null, 2));
                }
            });

            function validateForm() {
				let isValid = true;
				$('.error').text('');

				let address = $('#address').val().trim();
				let city = $('#city').val().trim();
				let state = $('#state').val().trim();
				let zip = $('#zip').val().trim();
				let carrier = $('#carrier').val();
				let method = $('#method').val();

				if (!address) {
					$('#addressError').text('Address required.');
					isValid = false;
				}
				if (!city) {
					$('#cityError').text('City required.');
					isValid = false;
				}
				if (!state) {
					$('#stateError').text('State required.');
					isValid = false;
				}
				if (!zip) {
					$('#zipError').text('Zip code required.');
					isValid = false;
				}
				if (!carrier) {
					$('#carrierError').text('Carrier required.');
					isValid = false;
				}
				if (!method) {
					$('#methodError').text('Shipping method required.');
					isValid = false;
				}

				return isValid;
			}

            function gatherShippingData() {
                shippingDetailsJSON = {
                    address: $('#address').val().trim(),
                    city: $('#city').val().trim(),
                    state: $('#state').val().trim(),
                    zip: $('#zip').val().trim(),
                    carrier: $('#carrier').val(),
                    method: $('#method').val(),
                    cost: $('#shippingCost').text()
                };
            }
        });
    </script>

    <script>
        var app = angular.module('shippingApp', []);
        app.controller('ShippingController', ['$scope', function($scope) {
            // Future node.js code
        }]);
    </script>
</body>
</html>
